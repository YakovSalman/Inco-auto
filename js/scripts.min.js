const menu=document.querySelector(".menu"),mob=document.querySelector(".mob"),body=document.querySelector(".main__body");menu.addEventListener("click",(e=>{e.preventDefault(),menu.classList.toggle("active"),body.classList.toggle("locked"),mob.classList.toggle("active"),e.stopPropagation()})),document.addEventListener("click",(e=>{e.target.closest(".mob")||(menu.classList.remove("active"),body.classList.remove("locked"),mob.classList.remove("active"))}));const connection=document.querySelectorAll(".connection");connection.forEach((e=>{const t=document.querySelectorAll(".btn-hidden"),a=e.querySelector(".connection__close");t.forEach((t=>{t.addEventListener("click",(t=>{t.preventDefault(),e.classList.add("active"),body.classList.add("locked"),t.stopPropagation()}))})),a.addEventListener("click",(()=>{e.classList.remove("active"),body.classList.remove("locked")})),document.addEventListener("click",(t=>{t.target.closest(".connection")||(e.classList.remove("active"),body.classList.remove("locked"))}))}));const swiper=new Swiper(".swiper",{slidesPerView:1,spaceBetween:19,pagination:{el:".swiper-pagination"},navigation:{nextEl:".swiper-button-next",prevEl:".swiper-button-prev"},breakpoints:{700:{slidesPerView:1},800:{slidesPerView:4}}}),sliderImgMain=document.querySelector(".slider__img-main"),sliderImgSecondary=document.querySelectorAll(".slider__img-secondary");function modal(e,t){e=document.querySelectorAll(e);const a=(t=document.querySelector(t)).querySelector(".modal__backgound"),c=t.querySelector(".modal-close"),s=t.closest(".main__body");e.forEach((e=>{e.addEventListener("click",(e=>{e.preventDefault(),t.classList.add("active"),a.classList.add("active"),s.classList.add("locked"),e.stopPropagation()}))})),c.addEventListener("click",(()=>{t.classList.remove("active"),a.classList.remove("active"),s.classList.remove("locked")})),a.addEventListener("click",(()=>{t.classList.remove("active"),a.classList.remove("active"),s.classList.remove("locked")}))}function accordion(e){(e=document.querySelectorAll(e)).forEach((e=>{e.addEventListener("click",(e=>{let t=e.currentTarget,a=t.querySelector(".accordion__content"),c=t.querySelector(".accordion-arrow");t.classList.toggle("active"),t.classList.contains("active")?(c.classList.add("active"),a.style.maxHeight=a.scrollHeight+"px"):(a.style.maxHeight="",c.classList.remove("active"))}))}))}sliderImgSecondary.forEach((e=>{e.addEventListener("click",(e=>{let t=e.target.getAttribute("src");sliderImgMain.src=t}))})),modal(".btn-modal-tel",".modal-tel"),modal(".btn-modal-record",".modal-record"),modal(".btn-modal-question",".modal-question"),modal(".btn-modal-rent",".modal-rent"),accordion(".accordion__wrap");const form=document.querySelectorAll(".form");form.forEach((e=>{const t=e.querySelector(".btn-form"),a=e.querySelectorAll(".form-input"),c=e.querySelectorAll(".form-input-check"),s=e.querySelectorAll(".form-check-label"),l=e.querySelectorAll(".form-select-btn"),r=document.querySelectorAll(".modal__back"),o=document.querySelectorAll(".charger__back"),i=/^[a-z0-9_-]{3,16}$/,n=/^([А-ЯA-Z]|[А-ЯA-Z][\x27а-яa-z]{1,}|[А-ЯA-Z][\x27а-яa-z]{1,}\-([А-ЯA-Z][\x27а-яa-z]{1,}|(оглы)|(кызы)))\040[А-ЯA-Z][\x27а-яa-z]{1,}(\040[А-ЯA-Z][\x27а-яa-z]{1,})?$/;c.forEach((e=>{e.addEventListener("change",(()=>{e.checked?s.forEach((e=>{e.classList.remove("inactive")})):s.forEach((e=>{e.classList.add("inactive")})),a.forEach((a=>{l.forEach((c=>{e.checked&&""!=a.value&&""!=c.value?t.classList.remove("inactive"):t.classList.add("inactive")}))})),a.forEach((a=>{e.checked&&""!=a.value?t.classList.remove("inactive"):t.classList.add("inactive")}))}))}));document.querySelectorAll('input[name="phone"]').forEach((e=>{let t;const a=a=>{a.keyCode&&(t=a.keyCode),e.selectionStart<3&&a.preventDefault();let c="+380 (__) ___ ____",s=0,l=c.replace(/\D/g,""),r=e.value.replace(/\D/g,""),o=c.replace(/[_\d]/g,(e=>s<r.length?r.charAt(s++)||l.charAt(s):e));s=o.indexOf("_"),-1!=s&&(s<5&&(s=3),o=o.slice(0,s));let i=c.substr(0,e.value.length).replace(/_+/g,(e=>"\\d{1,"+e.length+"}")).replace(/[+()]/g,"\\$&");i=new RegExp("^"+i+"$"),(!i.test(e.value)||e.value.length<6||t>47&&t<58)&&(e.value=o),(a.type=e.value.length<6)&&(e.value="")};e.addEventListener("input",a,!1),e.addEventListener("focus",a,!1),e.addEventListener("blur",a,!1),e.addEventListener("keydown",a,!1)})),a.forEach((e=>{e.addEventListener("blur",(()=>{var t;""!=(t=e).value&&t.classList.remove("blank"),"username"===t.name&&(n.test(t.value)||""===t.value||(t.value="",t.placeholder="Введите коректное имя",t.classList.add("blank"))),"name"===t.name&&(i.test(t.value)||""===t.value||(t.value="",t.placeholder="Введите коректное имя",t.classList.add("blank")))}))}));e.querySelectorAll('input[name="phone"]').forEach((e=>{e.addEventListener("blur",(()=>{e.value.length<18&&(e.value="",e.placeholder="Введите коректый номер телефона",e.classList.add("blank"))}))})),e.addEventListener("submit",(i=>{i.preventDefault(),a.forEach((e=>{""==e.value?(e.classList.add("blank"),t.classList.add("inactive"),"username"===e.name&&(e.placeholder="Пожалуйста введите имя"),"name"===e.name&&(e.placeholder="Пожалуйста введите имя"),"phone"===e.name&&(e.placeholder="Пожалуйста введите телефон"),"place"===e.name&&(e.placeholder="Пожалуйста введите текст сообщения")):(e.classList.remove("blank"),t.classList.remove("inactive"))})),l.forEach((e=>{const t=e.parentNode;""===e.value?(e.classList.add("inactive"),t.classList.add("inactive")):(e.classList.remove("inactive"),t.classList.remove("inactive"))})),c.forEach((e=>{e.checked||s.forEach((e=>{e.classList.add("inactive")}))})),a.forEach((t=>{const a=e.closest(".modal__inner");l.forEach((e=>{c.forEach((c=>{if(""!=t.value&&""!=e.value&&c.checked){if(null==a)return;a.classList.add("inactive"),r.forEach((e=>{e.classList.add("active")}))}else{if(null==a)return;a.classList.remove("inactive"),r.forEach((e=>{e.classList.remove("active")}))}}))})),c.forEach((e=>{if(""!=t.value&&e.checked){if(null==a)return;a.classList.add("inactive"),r.forEach((e=>{e.classList.add("active")}))}else{if(null==a)return;a.classList.remove("inactive"),r.forEach((e=>{e.classList.remove("active")}))}}))})),setTimeout((function(){r.forEach((e=>{e.classList.contains("active")&&location.reload()}))}),2e3),a.forEach((t=>{const a=e.closest(".charger__wrap");c.forEach((e=>{if(""!=t.value&&e.checked){if(null==a)return;a.classList.add("inactive"),o.forEach((e=>{e.classList.add("active")}))}else{if(null==a)return;a.classList.remove("inactive"),o.forEach((e=>{e.classList.remove("active")}))}}))})),setTimeout((function(){o.forEach((e=>{e.classList.contains("active")&&location.reload()}))}),2e3)}))}));const selectWrapper=document.querySelectorAll(".form-select-wrapper");selectWrapper.forEach((e=>{const t=e.querySelector(".form-select-btn"),a=e.querySelector(".form-select-list"),c=e.querySelectorAll(".form-select-item");t.addEventListener("click",(t=>{t.preventDefault(),a.classList.toggle("active"),e.classList.toggle("active")})),c.forEach((s=>{s.addEventListener("click",(l=>{let r=l.currentTarget,o=r.innerText;const i=r.dataset.value;t.innerText=o,t.value=i,a.classList.remove("active"),e.classList.remove("active"),t.classList.remove("inactive"),e.classList.remove("inactive"),c.forEach((e=>{e.classList.remove("inactive"),t.classList.remove("inoperative")})),t.innerText===o&&s.classList.add("inactive")}))})),document.addEventListener("click",(c=>{c.target.closest(".form-select-wrapper")||(a.classList.remove("active"),t.classList.remove("active"),e.classList.remove("active"))}))}));